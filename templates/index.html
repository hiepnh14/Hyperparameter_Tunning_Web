<!DOCTYPE html>
<html>
<head>
    <title>MNIST Training</title>
</head>
<body>
    <h1>MNIST Model Training</h1>
    <form id="trainingForm">
            <label for="epochs">Epochs:</label>
            <input type="number" id="epochs" name="epochs" value="5"><br>
            <label for="learningRate">Learning Rate:</label>
            <input type="text" id="learningRate" name="learningRate" value="0.003"><br>
            <label for="batchSize">Batch Size:</label>
            <input type="number" id="batchSize" name="batchSize" value="64"><br>
            <button type="submit">Start Training</button>
        </form>
        
    </form>
    <p id="status">Training status: Not started</p>

    <script>
        document.getElementById('trainingForm').onsubmit = function(event) {
    event.preventDefault();
    var epochs = document.getElementById('epochs').value;
    var learningRate = document.getElementById('learningRate').value;
    var batchSize = document.getElementById('batchSize').value;

    var formData = new FormData();
    formData.append('epochs', epochs);
    formData.append('learningRate', learningRate);
    formData.append('batchSize', batchSize);

    fetch('/start_training', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => console.log(data));

    updateStatus();
};


        function updateStatus() {
            fetch('/status')
            .then(response => response.json())
            .then(data => {
                document.getElementById('status').innerText = 'Training status: ' + data.status;
            });
        }

        setInterval(updateStatus, 5000);  // Update status every 5 seconds
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js">
        <canvas id="accuracyChart" width="400" height="200"></canvas>
        function plotAccuracyChart() {
    fetch('/accuracy')
    .then(response => response.json())
    .then(data => {
        const ctx = document.getElementById('accuracyChart').getContext('2d');
        const accuracyChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.map((_, index) => index + 1),
                datasets: [{
                    label: 'Accuracy',
                    data: data,
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
}

setInterval(plotAccuracyChart, 5000);  // Update chart every 5 seconds

    </script>
    
    
</body>
</html>
